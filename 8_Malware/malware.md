<!--
author:   Gionata Massi

email:    gionata.massi@savoiabenincasa.it

version:  0.0.1

language: it

narrator: IT Italian Male

comment:  Malware.
mode:     Textbook
-->

# Il software malevolo

## Introduzione

La scorsa settimana abbiamo visto come, trafugando le nostre credenziali di accesso a computer o servizi online, le nostre informazioni possono essere 

* visualizzate da utenti non autorizzati (violazione della riservatezza);
* modificate da utenti non autorizzati (violazione dell'integrità);
* eliminate o rese inaccessibili (violazione della disponibilità).
C'è un altro modo per compromettere la nostra sicurezza, che consiste nel software malevolo, *malware*.

Oggi descriviamo qualche tipo di software malevolo e quali passi seguire per evitare che il nostro computer venga *infettato* da software malevoli.

## Virus e compagni

### Virus
![Un virus](https://www.open.edu/openlearn/ocw/pluginfile.php/697241/mod_oucontent/oucontent/34276/e1d42cc2/80030d83/ou_futurelearn_cyber_security_fig_1072.tif.jpg)
Un **virus** è un software che è stato scritto per inserire copie di se stesso in applicazioni e dati e su parti cruciali dei sistemi di archiviazione dati di un computer (ad esempio dischi rigidi, memory stick, ecc.). Si dice che i virus siano programmi auto-replicanti e risalgano all'inizio degli anni '70, ma sono diventati famosi solo con l'avvento dei microcomputer e, successivamente, di Internet.

I virus si attaccano ad applicazioni specifiche su un computer e vengono attivati ​​quando il programma viene eseguito per la prima volta. A quel punto, il virus può creare una copia di se stesso sul disco rigido e continuare a funzionare, oppure può essere eseguito solo ogni volta che si utilizza l'applicazione. I primi virus, che si basavano su floppy disk per la trasmissione, si diffondevano rapidamente quando i dischi di dati infetti venivano condivisi in un ufficio o il software piratato veniva passato in un parco giochi. Al giorno d'oggi, i virus si basano su dispositivi come le schede di memoria flash o vengono trasmessi tramite connessioni Internet.

Sebbene alcuni virus non abbiano lo scopo di causare danni, la maggior parte di questi programmi è progettata per danneggiare gli utenti, corrompendo i loro dati o attaccando il sistema operativo stesso o fornendo una "backdoor" sfruttabile, dando agli aggressori l'accesso al computer. Anche dove non è previsto alcun danno, i virus consumano memoria, spazio su disco e potenza di elaborazione.

### Worm

![Un verme](https://www.open.edu/openlearn/ocw/pluginfile.php/697241/mod_oucontent/oucontent/34276/e1d42cc2/85f1dbd3/ou_futurelearn_cyber_security_fig_1073.tif.jpg)


Un altro tipo di malware autoreplicante è il **worm** (verme); come un virus è progettato per creare copie di se stesso, ma a differenza di un virus, un worm è un'applicazione autonoma.

I worm si diffondono attraverso le connessioni di rete, accedendo a macchine non infette e quindi dirottando le loro risorse per trasmettere ancora più copie attraverso la rete.

Ci sono quattro fasi in un attacco di worm:

1. La prima fase è quando il worm sonda altre macchine alla ricerca di una vulnerabilità che può essere sfruttata per copiarsi.
2. La seconda fase è penetrare nella macchina vulnerabile eseguendo le operazioni per sfruttare la vulnerabilità. Ad esempio, il worm potrebbe rilevare una connessione di rete aperta, attraverso la quale può indurre la macchina remota a eseguire istruzioni arbitrarie.
3. Nella terza fase, il worm si scaricherà sulla macchina remota e si memorizzerà lì. Questa è spesso chiamata la fase di *persistenza*.
4. Nella fase finale, il worm si propagherà scegliendo nuove macchine da sondare.

I worm sono stati inventati per curiosità e sono stati persino suggeriti come modi per testare reti o distribuire patch software su una rete; tuttavia i loro svantaggi superano di gran lunga i loro benefici. Anche il worm più "benigno" consuma risorse e può influire sulle prestazioni di un computer

### Trojan

![Cavallo di Troia](https://www.open.edu/openlearn/ocw/pluginfile.php/697241/mod_oucontent/oucontent/34276/e1d42cc2/da1718b0/ou_futurelearn_cyber_security_fig_1074.tif.jpg)
Un altro tipo di malware è il **Trojan** (o cavallo di Troia), dal nome del cavallo di legno che presumibilmente ha introdotto di nascosto i soldati greci nell'antica città di Troia.

Un Trojan si traveste da programma del tutto legittimo (come uno *screensaver*), ma dietro le quinte sta causando danni, forse consentendo a qualcun altro di ottenere il controllo del computer, copiare informazioni personali, eliminare informazioni, monitorare le sequenze di tasti o utilizzare software di posta elettronica per trasmettersi ad altri computer. A differenza di virus e worm, i trojan non si replicano da soli: si affidano alla loro apparente utilità per diffondersi tra i computer.

Alcuni trojan funzionano in modo isolato. Alcuni, tuttavia, si affidano alle reti per trasmettere informazioni rubate, come password, dettagli di conti bancari o numeri di carte di credito, o per fungere da *backdoor* per computer compromessi. Consentono agli aggressori di aggirare le funzionalità di sicurezza del sistema operativo e ottenere l'accesso ai dati o persino controllare la macchina su una rete.

### Altri software malevoli

![Libri](https://www.open.edu/openlearn/ocw/pluginfile.php/697241/mod_oucontent/oucontent/34276/e1d42cc2/862e1bde/ou_futurelearn_cyber_security_fig_1178.tif.jpg)

**Adware**, che obbliga gli utenti a visualizzare la pubblicità

**Spyware**, malware che tenta di accedere alle informazioni personali e alle password degli utenti.

**Backdoor Trojan** 

**Browser hijacker**

**Document malware**

**Fake antivirus malware**

**Ransomware**

**Rootkit**
 
## Come si infetta il tuo computer

### Come un malware entra nel computer

Il malware può entrare in un computer attraverso una varietà di meccanismi, molti dei quali implicano lo sfruttamento di una combinazione di fattori umani e tecnici.

Ad esempio, un creatore di malware potrebbe indurti a scaricare il proprio malware inserendo un collegamento in un'e-mail o allegando il malware a un'e-mail. In alternativa, il malware potrebbe essere confezionato con copie illegali di software standard in modo che possa entrare nei computer di persone che scelgono di utilizzare queste copie illegali piuttosto che pagare per le versioni originali.

Tuttavia, prima di esaminare in dettaglio come il malware entra nel tuo computer, vale la pena pensare al motivo per cui lo fa.

### A cosa serve il malware?

Ci sono molte ragioni per cui viene creato malware, tra cui 

* curiosità intellettuale,
* guadagni finanziari o
* spionaggio aziendale.

Molti programmatori si cimentano nella sfida di vedere cosa è possibile realizzare e si propongono di creare un programma malware anche se non intendono fare del male. Forse il più famoso di questi esperimenti è stato il Morris Worm del 1988, il primo worm a diffondersi su Internet. Il presunto intento di questo worm era quello di misurare il numero di macchine connesse alla rete. Tuttavia, il risultato è stato quello di rallentare il funzionamento delle macchine infette al punto da renderle inutilizzabili.

I worm continuano a rappresentare una grave minaccia, come dimostrato dal caso del Conficker Worm del 2008.

### Phishing

![Un pescatore di password](https://www.open.edu/openlearn/ocw/pluginfile.php/697241/mod_oucontent/oucontent/34276/e1d42cc2/831d725f/ou_futurelearn_cyber_security_fig_1078.tif.jpg)
Il **phishing** è qualsiasi tentativo da parte di aggressori di rubare informazioni preziose fingendo di essere un interlocutore affidabile, una forma di attacco di ingegneria sociale.

Pertanto, un utente malintenzionato potrebbe impersonare una banca per ottenere numeri di carta di credito o dettagli del conto bancario. Prende il nome da "pesca", come in "pesca di informazioni", il processo per indurre le persone a divulgare informazioni riservate.

Il phishing si basa su persone che credono che i messaggi dall'aspetto ufficiale o le conversazioni con individui apparentemente autorevoli siano autentici. È molto diffuso e può essere enormemente costoso per le persone che scoprono che i loro conti bancari sono svuotati, i riferimenti di credito distrutti o che perdono informazioni personali o sensibili.

#### Email phishing

L'uso di tecnologie elettroniche per eseguire attacchi di phishing è stato descritto alla fine degli anni '80, ma il termine non è diventato comune fino alla metà degli anni '90, quando un programma chiamato AOHell ha permesso agli utenti di AOL di impersonare altre persone (incluso lo stesso fondatore di AOL).

Il phishing è diventato sempre più comune poiché sempre più persone si sono collegate per la prima volta e hanno iniziato a ricevere messaggi dall'aspetto ufficiale che assomigliavano molto a quelli inviati da organizzazioni autentiche come banche, negozi e dipartimenti governativi. Ciò di cui la maggior parte di questi utenti non si rendeva conto era che non solo gli indirizzi e-mail potevano essere falsificati, ma che i dati elettronici possono essere facilmente copiati - solo perché un'e-mail afferma di provenire dalla tua banca e ha il logo della tua banca non significa che sia autentica .

Le e-mail di phishing possono essere inviate a caso. Un phisher creerà un'e-mail chiedendo all'utente di mettersi in contatto con una banca o una società di carte di credito sostenendo che c'è un problema con l'account o che la banca potrebbe aver perso del denaro. Questo tipo di messaggi rende le persone giustamente preoccupate e più propense a seguire le istruzioni. Il phisher includerà quindi alcuni dettagli dall'aspetto plausibile come il logo e l'indirizzo della banca e li invierà a milioni di persone. Tra tutti i destinatari, alcune persone avranno conti presso quella banca e faranno clic sul collegamento nel messaggio o telefoneranno a un numero, che inizierà il processo di raccolta di ulteriori informazioni personali.

#### Cosa fare

Se ricevi un'e-mail che ti preoccupa da un'organizzazione come una banca o un negozio che utilizzi, non fare clic o seguire i collegamenti nel messaggio. Mettiti in contatto con il loro dipartimento del servizio clienti o accedi al tuo account tramite il loro sito web. Digita il loro indirizzo web o utilizza l'indirizzo nell'elenco dei tuoi siti preferiti oppure utilizza il numero di telefono pubblicato. La maggior parte delle organizzazioni avrà una politica pubblicata per non richiedere informazioni sensibili come la password tramite e-mail o per telefono, quindi dovresti essere sospettoso di tutto ciò che viola questa politica.

#### Phishing sui social media

Sebbene la posta elettronica rappresenti ancora la maggior parte degli attacchi di phishing, la tecnica viene utilizzata anche nei siti di social media e nei messaggi di testo. Si applicano le stesse regole: in caso di dubbio, andare sul sito ufficiale e contattare l'azienda tramite i link pubblicati.

A volte il phishing può essere mirato a individui o parti specifiche di un'organizzazione. Questi attacchi, comunemente chiamati "attacchi di spear phishing", dipenderanno da informazioni dettagliate sul bersaglio. Ad esempio, un utente malintenzionato potrebbe utilizzare le informazioni raccolte da e-mail recenti per creare una risposta plausibile che sembra provenire dai colleghi dell'utente mirato.

Gli aggressori possono anche includere collegamenti a software infetto da malware nei messaggi personali pubblicati sui social media. Ciò è particolarmente comune dopo gravi disastri o durante le ultime notizie quando è probabile che le persone facciano clic su collegamenti dall'aspetto interessante senza riflettere attentamente.

###  Intercettare le e-mail di phishing

Il phishing è solo un tipo di e-mail di spam che riempie le nostre caselle di posta e spesso fornisce contenuti non idonei o addirittura illegali alle persone.

#### Spam

Lo spam è un'altra conseguenza del primo Internet sviluppato da persone che si fidavano l'un l'altro. La posta elettronica è diventata uno strumento che chiunque può utilizzare nel bene e nel male.

La maggior parte delle e-mail Internet viene spostata in tutto il mondo utilizzando il protocollo SMTP (Simple Mail Transfer Protocol) che definisce un modello standard di comandi e formattazione che consente a diversi programmi di posta, su una vasta gamma di computer, di capirsi a vicenda. I protocolli vengono utilizzati per specificare una serie di messaggi speciali che devono essere scambiati tra computer per ottenere una particolare funzionalità, in questo caso la consegna della posta elettronica.

SMTP è stato definito quando Internet aveva solo un numero esiguo di utenti, quindi la specifica originale non includeva alcun modo per i computer di autenticarsi a vicenda, ovvero non c'era modo di sapere se il messaggio che dichiarava di provenire da TrustedBank provenisse effettivamente dai computer di TrustedBank . Questa debolezza è stata risolta in un'estensione successiva a SMTP chiamata SMTP-AUTH, ma fondamentalmente non era richiesta, quindi quasi tutti i server di posta accettano ancora messaggi non autenticati.

#### Spoofing

Gli spammer possono attaccare un sistema di posta modificando le informazioni memorizzate nelle "buste" delle email che racchiudono i messaggi stessi. Questo è noto come "spoofing" e consente a uno spammer di mascherare il proprio indirizzo effettivo scrivendo nuovi indirizzi per il mittente (ad esempio sostituendo il proprio indirizzo con quello di TrustedBank) e la destinazione delle ricevute. Poiché i server SMTP non eseguono alcuna autenticazione, trasmettono semplicemente l'e-mail senza verificare che sia stata inviata da TrustedBank.

Il semplice spoofing è ora messo alla prova dalle tecnologie che consentono ai mittenti autentici di autenticare i messaggi che possono essere controllati dal server di posta del destinatario, tuttavia solo circa la metà di tutte le caselle di posta ha una protezione contro lo spoofing.

A condizione che uno spammer abbia accesso a una rete veloce (o sempre più a una botnet), lo spam non costa quasi nulla al mittente e sebbene solo una piccola parte degli utenti risponderà a un messaggio di spam, viene inviato un numero sufficientemente elevato di e-mail che le ricompense superano di gran lunga i costi. È stato stimato che sette milioni di miliardi di messaggi di spam, che costituiscono oltre l'85% di tutte le e-mail, sono stati inviati solo nel 2011. Si stima che nel 2018 lo spam fosse inferiore al 55% di tutti i messaggi. Tale è il flusso di spam che i fornitori di servizi Internet e le aziende devono acquistare molta più larghezza di banda e spazio di archiviazione di quanta ne avranno mai bisogno per scopi legittimi.

### Individuare un tentativo di phishing

Sebbene un attacco di phishing possa sembrare plausibile a prima vista, ci sono alcuni segnali rivelatori che dovrebbero renderti molto cauto nel fare clic su qualsiasi link o fornire informazioni personali al presunto mittente.

Leggi i punti seguenti per scoprire cosa cercare.

* **Errori di ortografia**: la maggior parte dei messaggi di phishing vengono inviati da paesi in cui la lingua del messaggio non è la lingua principale. Gli aggressori spesso si tradiscono con un uso impreciso della lingua, anche con frasi abbastanza comuni, e includono errori di ortografia. Quindi leggi attentamente il messaggio. Tuttavia, ci sono molte e-mail di phishing che utilizzano un ottimo italiano.

* **A chi è rivolto**? Molti attacchi di phishing, ma non tutti, non utilizzano il tuo nome nell'introduzione, preferendo "Gentile cliente stimato" o "Gentile utente". Questo perché non possono personalizzare sufficientemente le e-mail. La tua banca o il tuo negozio online può farlo e dovrebbe chiamarti "Caro Bob" o "Cara signora Jones" (o qualunque sia il tuo nome). Tuttavia, tieni presente che, poiché così tanti milioni di dettagli degli utenti sono stati rivelati da violazioni dei dati, è del tutto possibile che un'e-mail di phishing utilizzi i tuoi dati personali.

* **Immagini di scarsa qualità**: a volte, le immagini utilizzate nelle e-mail sono sfocate o le tue informazioni potrebbero apparire come un'immagine anziché come un testo. Queste immagini sono state copiate dagli schermi e non sarebbero state utilizzate dalle società originali. Tuttavia, è facile ottenere immagini altrettanto buone degli originali, quindi un'immagine di alta qualità non dovrebbe convincerti che il messaggio è autentico.

* **Contenuto dell'e-mail**: in quasi tutti i paesi, le banche e altri organismi finanziari non ti invieranno un'e-mail per informarti dei problemi con il tuo account. Riconoscono che la posta elettronica è fondamentalmente insicura e che le informazioni personali non dovrebbero essere inviate tramite posta elettronica. Quindi, anche il metodo di comunicazione ti darà un indizio sul fatto che sia autentico. L'e-mail può dare un falso senso di urgenza, sostenendo che il tuo account è a rischio se non agisci rapidamente. Questo non è il caso.

*  **Collegamenti**: il testo di un collegamento Web non è lo stesso della destinazione del collegamento stesso: il collegamento potrebbe indicare che ti sta portando a, ad esempio http://www.trustedbank.com, ma in realtà può portarti ovunque sul Web, compreso il computer di un phisher che si spaccia per una spettabile società. Puoi individuare alcuni collegamenti falsi passando il puntatore del mouse sul collegamento, ma non fare clic sul pulsante. La destinazione effettiva del collegamento verrà visualizzata nella parte inferiore della finestra o in una piccola finestra mobile accanto al collegamento. In un'email di phishing, il collegamento sarà probabilmente a un indirizzo che non conosci. Altri link falsi possono mostrare una destinazione autentica quando ci passi sopra con il mouse, ma ti portano comunque a un sito web falso perché il codice nella pagina intercetta il link e invia il tuo clic altrove.

Quindi le regole sono di essere sospettosi e di guardare i dettagli del messaggio, la lingua, la qualità delle immagini e dove ti portano effettivamente i link. Banche e negozi preferiranno sempre che tu li chiami e controlli piuttosto che mettere a rischio la tua sicurezza.

Se non l'hai già fatto di recente, controlla il tuo indirizzo e-mail su https://haveibeenpwned.com/. Gli indirizzi e-mail che si trovano in un elenco violato hanno molte più probabilità di ricevere spam rispetto a quelli che non sono elencati. Se il tuo indirizzo email è nell'elenco, devi valutare quali dati correlati potrebbero essere stati rivelati. Potrebbe essere necessario modificare le password che utilizzano quell'indirizzo e-mail, soprattutto se hai riutilizzato le stesse password in passato, o addirittura smettere di usare quell'indirizzo e-mail


### Non solo e-mail

Non pensare che il malware si diffonda esclusivamente tramite e-mail. Il malware verrà diffuso con ogni mezzo possibile.

Il malware può essere distribuito includendolo con materiale piratato come copie illegali di software, videogiochi e film. Il malware può anche essere installato sul tuo computer facendo clic su collegamenti su siti Web, in particolare siti che distribuiscono copie illegali di software, video e materiale pornografico, o da fastidiose finestre pop-up che affermano di aver identificato problemi con il tuo computer (suggerimento rapido: probabilmente non lo sono ma è un ottimo suggerimento per eseguire il software antivirus e ricordare a te stesso che aspetto ha un avviso autentico sul tuo computer).

Una tendenza recente è che il malware si diffonda attraverso i servizi di social network. Una volta che si trova su un computer che esegue software di social networking, il malware si maschera come il vero utente e pubblica messaggi contenenti collegamenti a siti che distribuiscono ancora più malware.

Ancora una volta, questo tipo di malware si basa sull'ingegneria sociale per moltiplicarsi: è molto probabile che gli utenti dei social network facciano clic sui collegamenti che ritengono provengano da amici e diffondano l'infezione. La maggior parte di queste infezioni da social network ha sfruttato i punti deboli del software client piuttosto che delle versioni web delle reti, quindi è importante mantenere aggiornato il software client di social networking, come l'app Facebook per dispositivi mobili.

### Il ruolo del malware nelle frodi su Internet

La maggior parte del malware moderno è stato progettato con intenti dannosi; per causare danni al sistema operativo di un computer o ai suoi dati o per sottrarre informazioni a un utente o, in misura crescente, a inserzionisti online.

Come avrai visto, molti grandi siti web si affidano alla pubblicità per le loro entrate. La quantità di denaro speso per la pubblicità online sta crescendo rapidamente con oltre 16 miliardi di sterline spesi nel solo Regno Unito durante il 2011. Si prevede che supererà i 26 miliardi di sterline nel 2020. Agli inserzionisti piace la pubblicità online perché può essere relativamente economica rispetto a una carta stampata pubblicità e perché il software consente alle persone di essere mirate con annunci specifici per i prodotti che probabilmente acquisteranno.

Il tipo più comune di pubblicità è "pay per click", in cui gli inserzionisti pagano i proprietari di un sito solo quando un utente fa clic su un annuncio. Questo sistema può essere sovvertito generando clic che non provengono da clienti autentici o dirottando un clic destinato a un inserzionista autentico. Questa operazione è nota come frode sui clic, rappresenta oltre il 20% di tutti i clic e può essere aiutata dal malware. I computer di tutto il mondo, operando come una botnet, possono generare falsi clic, sottrarre denaro agli inserzionisti attraverso più livelli di editori e redistributori per nascondere la sua destinazione finale.

Esistono due modalità di frode dei clic utilizzate di frequente: entrambe possono utilizzare le botnet per generare i clic.

1. Fare clic su annunci aziendali mirati su siti autentici per sprecare i propri introiti pubblicitari. L'autore del reato non raccoglie alcun reddito.
2. Il criminale crea molte centinaia o migliaia di siti Web, spesso copiando semplicemente altri contenuti di siti Web. Si registrano per la pubblicità, ad es. adsense con google. Quindi commissionano a una rete di bot di fare clic sugli annunci nelle proprie pagine e raccogliere la loro quota delle entrate pubblicitarie.

Mentre un singolo clic solleverà solo una piccola quantità di denaro, fatto milioni di volte, la frode sui clic può raccogliere ingenti somme di denaro. Nel 2011, l'FBI ha interrotto un'operazione di frode basata sui clic con sede in Estonia che aveva infettato più di quattro milioni di computer in 100 paesi e rubato oltre 14 milioni di dollari agli inserzionisti.

Nel 2016, un gruppo criminale russo ha creato 6.000 siti Web con oltre 250.000 pagine contenenti pubblicità video. La loro rete di bot "guardava" oltre 300 milioni di annunci video ogni giorno. Stavano frodando gli inserzionisti per quasi quattro milioni di dollari al giorno.


## Riferimenti

* Reverse shell
    * https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md
    * https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md